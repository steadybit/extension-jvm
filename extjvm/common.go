package extjvm

import (
  "github.com/steadybit/action-kit/go/action_kit_api/v2"
  "github.com/steadybit/extension-jvm/extjvm/jvm"
  "github.com/steadybit/extension-kit/extutil"
)

const (
	targetIDOld = "application"
	targetID = "com.steadybit.extension_jvm"
	targetIcon  = "data:image/svg+xml,%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20d%3D%22M12.6001%2013.8462C12.6001%2013.2939%2013.0478%2012.8462%2013.6001%2012.8462H16.2001C16.7524%2012.8462%2017.2001%2013.2939%2017.2001%2013.8462C17.2001%2014.3984%2016.7524%2014.8462%2016.2001%2014.8462H13.6001C13.0478%2014.8462%2012.6001%2014.3984%2012.6001%2013.8462Z%22%20fill%3D%22%231D2632%22%2F%3E%0A%3Cpath%20d%3D%22M8.51581%2010.6865C8.13026%2010.291%207.49714%2010.283%207.10171%2010.6686C6.70627%2011.0541%206.69826%2011.6872%207.08381%2012.0827L8.80316%2013.8461L7.08381%2015.6096C6.69826%2016.005%206.70627%2016.6381%207.10171%2017.0237C7.49714%2017.4092%208.13026%2017.4012%208.51581%2017.0058L10.9158%2014.5442C11.2945%2014.1558%2011.2945%2013.5364%2010.9158%2013.148L8.51581%2010.6865Z%22%20fill%3D%22%231D2632%22%2F%3E%0A%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M19.7176%203H4.292L4.28884%203.00001C3.67412%203.00195%203.09037%203.25348%202.66358%203.69122C2.23762%204.1281%202.00182%204.71487%202%205.32212V18.7692C2%2019.3528%202.22579%2019.9174%202.63547%2020.3376C3.04599%2020.7587%203.60824%2021%204.2%2021H19.708L19.7112%2021C20.3259%2020.9981%2020.9096%2020.7465%2021.3364%2020.3088C21.7624%2019.8719%2021.9982%2019.2851%2022%2018.6779L22%2018.6749L22%205.31856L22%205.31554C21.9982%204.71004%2021.7631%204.12495%2021.3383%203.68929C20.9127%203.25279%2020.3306%203.00195%2019.7176%203ZM20%206.69232V5.32037C19.9994%205.22761%2019.963%205.14368%2019.9063%205.08549C19.8504%205.02818%2019.7802%205.00048%2019.7122%205H4.29417C4.22453%205.00048%204.15266%205.02888%204.09558%205.08742C4.03762%205.14687%204.00055%205.23254%204%205.3271V6.69232H20ZM4%208.69232H20V18.6731C19.9994%2018.7676%2019.9623%2018.8532%2019.9044%2018.9126C19.8473%2018.9711%2019.7754%2018.9995%2019.7058%2019H4.2C4.15525%2019%204.10704%2018.982%204.06747%2018.9414C4.02706%2018.9%204%2018.8385%204%2018.7692V8.69232Z%22%20fill%3D%22%231D2632%22%2F%3E%0A%3C%2Fsvg%3E%0A"
	basePath   = "/jvm"

  controllerDelayIcon = "data:image/svg+xml,%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20clip-path%3D%22url%28%23clip0_1_36269%29%22%3E%0A%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M0.672193%200.662C1.09415%200.240044%201.66645%200.00299072%202.26318%200.00299072H20.2632C20.8599%200.00299072%2021.4322%200.240044%2021.8542%200.662C22.2761%201.08396%2022.5132%201.65625%2022.5132%202.25299V8.25299C22.5132%208.6672%2022.1774%209.00299%2021.7632%209.00299C21.349%209.00299%2021.0132%208.6672%2021.0132%208.25299V2.25299C21.0132%202.05408%2020.9342%201.86331%2020.7935%201.72266C20.6529%201.58201%2020.4621%201.50299%2020.2632%201.50299H2.26318C2.06427%201.50299%201.87351%201.58201%201.73285%201.72266C1.5922%201.86331%201.51318%202.05408%201.51318%202.25299V18.753C1.51318%2018.9519%201.5922%2019.1427%201.73285%2019.2833C1.87351%2019.424%202.06427%2019.503%202.26318%2019.503H8.26318C8.6774%2019.503%209.01318%2019.8388%209.01318%2020.253C9.01318%2020.6672%208.6774%2021.003%208.26318%2021.003H2.26318C1.66645%2021.003%201.09415%2020.7659%200.672193%2020.344C0.250237%2019.922%200.0131836%2019.3497%200.0131836%2018.753V2.25299C0.0131836%201.65625%200.250237%201.08396%200.672193%200.662Z%22%20fill%3D%22%231D2632%22%2F%3E%0A%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M0.0131836%205.25299C0.0131836%204.83878%200.34897%204.50299%200.763184%204.50299H21.7632C22.1774%204.50299%2022.5132%204.83878%2022.5132%205.25299C22.5132%205.6672%2022.1774%206.00299%2021.7632%206.00299H0.763184C0.34897%206.00299%200.0131836%205.6672%200.0131836%205.25299Z%22%20fill%3D%22%231D2632%22%2F%3E%0A%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M17.2602%2012.003C14.3607%2012.003%2012.0102%2014.3535%2012.0102%2017.253C12.0102%2020.1525%2014.3607%2022.503%2017.2602%2022.503C20.1597%2022.503%2022.5102%2020.1525%2022.5102%2017.253C22.5102%2014.3535%2020.1597%2012.003%2017.2602%2012.003ZM10.5102%2017.253C10.5102%2013.5251%2013.5323%2010.503%2017.2602%2010.503C20.9881%2010.503%2024.0102%2013.5251%2024.0102%2017.253C24.0102%2020.9809%2020.9881%2024.003%2017.2602%2024.003C13.5323%2024.003%2010.5102%2020.9809%2010.5102%2017.253Z%22%20fill%3D%22%231D2632%22%2F%3E%0A%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M17.2602%2013.852C17.6744%2013.852%2018.0102%2014.1878%2018.0102%2014.602V16.503H19.9122C20.3264%2016.503%2020.6622%2016.8388%2020.6622%2017.253C20.6622%2017.6672%2020.3264%2018.003%2019.9122%2018.003H17.2602C16.846%2018.003%2016.5102%2017.6672%2016.5102%2017.253V14.602C16.5102%2014.1878%2016.846%2013.852%2017.2602%2013.852Z%22%20fill%3D%22%231D2632%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3CclipPath%20id%3D%22clip0_1_36269%22%3E%0A%3Crect%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22white%22%2F%3E%0A%3C%2FclipPath%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A"

)

var (
  targetSelectionTemplates = []action_kit_api.TargetSelectionTemplate{
    {
      Label:       "by application name",
      Description: extutil.Ptr("Find application by name."),
      Query:       "application.name=\"\"",
    },
  }
)

func GetTarget(pid int32) *jvm.JavaVm {
  jvMs := GetJVMs()
  for _, jvm := range jvMs {
    if jvm.Pid == pid {
      return &jvm
    }
  }
  return nil
}
